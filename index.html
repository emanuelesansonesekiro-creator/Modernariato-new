<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Modernariato ‚Ä¢ Ricerca Designer</title>
  <meta name="description" content="App PWA per cercare designer italiani, biografie, opere e fare match da foto. Preferiti inclusi.">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icon-192.png" sizes="192x192">
  <link rel="apple-touch-icon" href="icon-192.png">
  <meta name="theme-color" content="#111827">
  <!-- Tailwind via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    .card { @apply bg-white/90 dark:bg-zinc-900/80 rounded-2xl shadow-md p-4 border border-zinc-200 dark:border-zinc-800; }
    .btn { @apply px-3 py-2 rounded-xl border border-zinc-300 dark:border-zinc-700 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition; }
    .pill { @apply text-xs px-2 py-1 rounded-full bg-zinc-100 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700; }
    .grid-auto { grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); }
  </style>
</head>
<body class="bg-zinc-50 text-zinc-900 dark:bg-zinc-950 dark:text-zinc-100 min-h-screen">
  <header class="sticky top-0 z-50 backdrop-blur supports-[backdrop-filter]:bg-white/60 dark:supports-[backdrop-filter]:bg-zinc-950/60 border-b border-zinc-200 dark:border-zinc-800">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center gap-3">
      <img src="icon-192.png" alt="logo" class="w-8 h-8 rounded-xl"/>
      <h1 class="text-xl font-semibold">Modernariato ‚Ä¢ Ricerca Designer</h1>
      <span class="ml-auto"></span>
      <button id="btnToggleTheme" class="btn" title="Tema">üåì</button>
      <button id="btnFavorites" class="btn flex items-center gap-2"><i data-lucide="star"></i><span class="hidden sm:inline">Preferiti</span></button>
      <button id="btnHome" class="btn flex items-center gap-2 hidden"><i data-lucide="home"></i><span class="hidden sm:inline">Home</span></button>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-4 py-6 space-y-6">
    <!-- Search & Upload -->
    <section class="card">
      <div class="flex flex-col md:flex-row md:items-end gap-3">
        <div class="flex-1">
          <label class="text-sm">Cerca designer italiani</label>
          <input id="q" class="w-full mt-1 px-3 py-3 rounded-xl border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-900" placeholder="Es. Achille Castiglioni, lampade anni 60..." />
        </div>
        <div class="flex gap-2">
          <button id="btnSearch" class="btn">Cerca</button>
          <button id="btnClear" class="btn">Pulisci</button>
        </div>
      </div>
      <div class="mt-4 grid md:grid-cols-2 gap-3">
        <div>
          <label class="text-sm">Filtra per periodo (decennio)</label>
          <select id="decade" class="w-full mt-1 px-3 py-3 rounded-xl border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-900">
            <option value="">Tutti</option>
            <option>1900</option><option>1910</option><option>1920</option><option>1930</option><option>1940</option>
            <option>1950</option><option>1960</option><option>1970</option><option>1980</option><option>1990</option>
            <option>2000</option><option>2010</option><option>2020</option>
          </select>
        </div>
        <div>
          <label class="text-sm">Cerca da foto (match visivo)</label>
          <div class="flex gap-2 mt-1 items-center">
            <input id="fileInput" type="file" accept="image/*" capture="environment" class="flex-1 file:btn file:px-3 file:py-2 file:rounded-xl"/>
            <button id="btnPhotoSearch" class="btn">Cerca dalla foto</button>
          </div>
          <p class="text-xs mt-2 text-zinc-500">Suggerimento: per riconoscimenti accurati collega un'API ‚ÄúPro‚Äù (CLIP/ViT/Google Vision). Vedi README.</p>
        </div>
      </div>
    </section>

    <!-- Results -->
    <section id="results" class="grid grid-auto gap-4"></section>

    <!-- Favorites -->
    <section id="favorites" class="hidden">
      <div class="flex items-center gap-3">
        <h2 class="text-lg font-semibold">I tuoi Preferiti</h2>
        <button id="btnClearFav" class="btn">Svuota</button>
      </div>
      <div id="favList" class="mt-3 grid grid-auto gap-4"></div>
    </section>

    <!-- Designer Modal -->
    <dialog id="designerModal" class="backdrop:bg-black/50 rounded-2xl p-0 w-full max-w-3xl">
      <div class="card">
        <div class="flex items-start gap-4">
          <img id="modalImg" class="w-28 h-28 object-cover rounded-2xl border border-zinc-200 dark:border-zinc-800" alt=""/>
          <div class="flex-1">
            <h3 id="modalName" class="text-xl font-semibold"></h3>
            <div id="modalMeta" class="text-sm text-zinc-500"></div>
            <div class="mt-2 flex flex-wrap gap-2" id="modalTags"></div>
          </div>
          <button id="modalClose" class="btn">Chiudi</button>
        </div>
        <div id="modalBio" class="prose prose-zinc dark:prose-invert mt-4 max-w-none"></div>
        <h4 class="mt-6 font-semibold">Opere note</h4>
        <div id="modalWorks" class="mt-2 grid grid-auto gap-3"></div>
      </div>
    </dialog>
  </main>

  <script src="app.js"></script>
  <script>lucide.createIcons();</script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => navigator.serviceWorker.register('/sw.js'));
    }
  </script>
</body>
</html>
